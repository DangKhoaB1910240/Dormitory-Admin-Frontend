<div id="content">
  <!-- Begin Page Content -->
  <div class="container-fluid">
    <!-- Page Heading -->

    <ngx-spinner
      bdColor="rgba(1.5, 0, 0, 1)"
      template="<img src='https://media.giphy.com/media/o8igknyuKs6aY/giphy.gif' />"
    >
    </ngx-spinner>
    <!-- Content Row -->
    <!-- The Modal -->
    <div class="modal" id="myModal">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">Danh sách sinh viên trong phòng</h4>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            <table class="table" style="font-size: small">
              <thead class="table-dark">
                <th>MSSV</th>
                <th>Họ tên</th>
                <th>Ngày sinh</th>
                <th>Email</th>
                <th>SĐT</th>
                <th>Ngành</th>
                <th>Lớp</th>
              </thead>
              <tbody>
                <tr *ngFor="let s of students">
                  <td>{{ s.numberStudent }}</td>
                  <td>{{ s.name }}</td>
                  <td>{{ s.birthday | date : "dd-MM-yyyy" }}</td>
                  <td>{{ s.email }}</td>
                  <td>{{ s.phone }}</td>
                  <td>{{ s.major }}</td>
                  <td>{{ s.classroom }}</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Modal footer -->
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-danger"
              data-bs-dismiss="modal"
            >
              Đóng
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- The Modal -->
    <div class="modal" id="myModal1">
      <div class="modal-dialog">
        <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">
              Nhập hóa đơn điện nước
              <span style="color: lightcoral; font-weight: bold"
                >tháng {{ nowDate | date : "MM" }}</span
              >
            </h4>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            <form>
              <div>
                <label for="finalWater">Chỉ số nước cuối</label>
                <br />
                <input
                  [(ngModel)]="finalWater"
                  name="finalWater"
                  id="finalWater"
                  type="number"
                />
              </div>
              <div>
                <label for="finalElectricity">Chỉ số điện cuối</label>
                <br />
                <input
                  [(ngModel)]="finalElectricity"
                  name="finalElectricity"
                  id="finalElectricity"
                  type="number"
                />
              </div>
            </form>
          </div>

          <!-- Modal footer -->
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-success"
              (click)="handleAcceptBill()"
            >
              Xác nhận
            </button>
            <button
              type="button"
              class="btn btn-danger"
              data-bs-dismiss="modal"
            >
              Đóng
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- The Modal -->
    <div class="modal" id="myModal2">
      <div class="modal-dialog">
        <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">Thông tin phòng mới</h4>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            <form>
              <div>
                <label for="finalWater">Số phòng</label>
                <br />
                <input
                  [(ngModel)]="room.numberRoom"
                  name="numberRoom"
                  id="numberRoom"
                  type="number"
                />
              </div>
              <div>
                <label for="finalElectricity">Giới tính</label>
                <br />
                <input
                  type="radio"
                  name="gender"
                  value="1"
                  [(ngModel)]="room.gender"
                />
                Nam
                <input
                  style="margin-right: 3%"
                  type="radio"
                  value="0"
                  name="gender"
                  [(ngModel)]="room.gender"
                />
                Nữ
              </div>
            </form>
          </div>

          <!-- Modal footer -->
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-success"
              (click)="createRoom()"
            >
              Thêm
            </button>
            <button
              type="button"
              class="btn btn-danger"
              data-bs-dismiss="modal"
            >
              Đóng
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <!-- Area Chart -->
      <div class="col-xl-12 col-lg-12">
        <div class="card shadow mb-4">
          <div
            class="card-header py-3 d-flex flex-row align-items-center justify-content-between"
          >
            <h6 class="m-0 font-weight-bold text-primary">QUẢN LÝ PHÒNG</h6>
            <div class="dropdown no-arrow">
              <a
                class="dropdown-toggle"
                href="#"
                role="button"
                id="dropdownMenuLink"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
              </a>
              <div
                class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                aria-labelledby="dropdownMenuLink"
              >
                <div class="dropdown-header">Dropdown Header:</div>
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Something else here</a>
              </div>
            </div>
          </div>
          <div class="card-body">
            <div
              class="text-muted"
              data-bs-toggle="modal"
              data-bs-target="#myModal2"
            >
              Thêm phòng
            </div>
          </div>
          <!--Modal: modalPush-->
          <table
            id="example"
            class="table text-left text-center"
            style="font-size: small"
          >
            <thead>
              <tr>
                <th>Số phòng</th>
                <th>Loại phòng</th>
                <th>Số lượng hiện tại</th>
                <th>Trạng thái</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let r of rooms; index as i">
                <td>{{ r.numberRoom }}</td>
                <td>{{ r.gender == 1 ? "Nam" : "Nữ" }}</td>
                <td>{{ r.currentQuantity }}</td>
                <td>
                  <select (change)="updateEnable(r)">
                    <option value="HOẠT ĐỘNG TỐT" [selected]="r.enable">
                      HOẠT ĐỘNG TỐT
                    </option>
                    <option value="ĐANG SỬA CHỮA" [selected]="!r.enable">
                      ĐANG SỬA CHỮA
                    </option>
                  </select>
                </td>
                <td>
                  <div>
                    <a
                      style="cursor: pointer; font-weight: bold"
                      class="text-info"
                      data-bs-toggle="modal"
                      data-bs-target="#myModal"
                      (click)="handleViewListStudents(r.numberRoom)"
                      >Danh sách sinh viên</a
                    >
                  </div>
                  <div *ngIf="r.enable">
                    <a
                      style="cursor: pointer; font-weight: bold"
                      class="text-secondary"
                      data-bs-toggle="modal"
                      data-bs-target="#myModal1"
                      (click)="getRoomId(r)"
                      >Nhập hóa đơn điện nước</a
                    >
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
