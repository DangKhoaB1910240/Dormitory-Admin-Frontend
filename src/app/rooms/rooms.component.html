<div id="content">
  <!-- Begin Page Content -->
  <div class="container-fluid">
    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
      <h1 class="h3 mb-0 text-gray-800">Danh sách loại phòng</h1>
    </div>
    <ngx-spinner
      bdColor="rgba(1.5, 0, 0, 1)"
      template="<img src='https://media.giphy.com/media/o8igknyuKs6aY/giphy.gif' />"
    >
    </ngx-spinner>
    <!-- Content Row -->
    <!-- The Modal -->
    <div class="modal" id="myModal">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">Danh sách sinh viên trong phòng</h4>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            <table class="table" style="font-size: small">
              <thead class="table-dark">
                <th>MSSV</th>
                <th>Họ tên</th>
                <th>Ngày sinh</th>
                <th>Email</th>
                <th>SĐT</th>
                <th>Ngành</th>
                <th>Lớp</th>
              </thead>
              <tbody>
                <tr *ngFor="let s of students">
                  <td>{{ s.numberStudent }}</td>
                  <td>{{ s.name }}</td>
                  <td>{{ s.birthday | date : "dd-MM-yyyy" }}</td>
                  <td>{{ s.email }}</td>
                  <td>{{ s.phone }}</td>
                  <td>{{ s.major }}</td>
                  <td>{{ s.classroom }}</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Modal footer -->
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-danger"
              data-bs-dismiss="modal"
            >
              Đóng
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- The Modal -->
    <div class="modal" id="myModal1">
      <div class="modal-dialog">
        <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">
              Nhập hóa đơn điện nước
              <span style="color: lightcoral; font-weight: bold"
                >tháng {{ nowDate | date : "MM" }}</span
              >
            </h4>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            <form>
              <div>
                <label for="finalWater">Chỉ số nước cuối</label>
                <br />
                <input
                  [(ngModel)]="finalWater"
                  name="finalWater"
                  id="finalWater"
                  type="number"
                />
              </div>
              <div>
                <label for="finalElectricity">Chỉ số điện cuối</label>
                <br />
                <input
                  [(ngModel)]="finalElectricity"
                  name="finalElectricity"
                  id="finalElectricity"
                  type="number"
                />
              </div>
            </form>
          </div>

          <!-- Modal footer -->
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-success"
              (click)="handleAcceptBill()"
            >
              Xác nhận
            </button>
            <button
              type="button"
              class="btn btn-danger"
              data-bs-dismiss="modal"
            >
              Đóng
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <!-- Area Chart -->
      <div class="col-xl-12 col-lg-12">
        <div class="card shadow mb-4">
          <!--Modal: modalPush-->
          <table
            id="example"
            class="table text-left text-center"
            style="font-size: small"
          >
            <thead>
              <tr>
                <th>Số phòng</th>
                <th>Loại phòng</th>
                <th>Số lượng hiện tại</th>
                <th>Trạng thái</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let r of rooms; index as i">
                <td>{{ r.numberRoom }}</td>
                <td>{{ r.gender == 1 ? "Nam" : "Nữ" }}</td>
                <td>{{ r.currentQuantity }}</td>
                <td>
                  <select (change)="updateEnable(r)">
                    <option value="HOẠT ĐỘNG TỐT" [selected]="r.enable">
                      HOẠT ĐỘNG TỐT
                    </option>
                    <option value="ĐANG SỬA CHỮA" [selected]="!r.enable">
                      ĐANG SỬA CHỮA
                    </option>
                  </select>
                </td>
                <td>
                  <div>
                    <a
                      style="cursor: pointer; font-weight: bold"
                      class="text-info"
                      data-bs-toggle="modal"
                      data-bs-target="#myModal"
                      (click)="handleViewListStudents(r.numberRoom)"
                      >Danh sách sinh viên</a
                    >
                  </div>
                  <div *ngIf="r.enable">
                    <a
                      style="cursor: pointer; font-weight: bold"
                      class="text-secondary"
                      data-bs-toggle="modal"
                      data-bs-target="#myModal1"
                      (click)="getRoomId(r)"
                      >Nhập hóa đơn điện nước</a
                    >
                  </div>
                </td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <th>Số phòng</th>
                <th>Loại phòng</th>
                <th>Số lượng hiện tại</th>
                <th>Hoạt động</th>
                <th></th>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
